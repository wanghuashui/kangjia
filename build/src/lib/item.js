"use strict";$(function(){$.ajax({url:"../server/item.php",data:{id:location.href.split("=")[1]},dataType:"json"}).done(function(i){var t;t='<ul class="breadcrumb">\n                <li>'+i[0].goodstype+'></li>\n                <li class="active">'+i[0].goodsname+'</li>\n            </ul>\n            <div class="product-page">\n                <div class="row clearfix">\n                    <div class="product-show">\n                        <div class="product-main-image">\n                            <a href="" class="imgshow"><img src='+i[0].src+' alt=""></a>\n                            <div id="bigMirror"></div>\n                            <img class="zoomImg" style="background-image: url('+i[0].src+');" >\n                        </div>\n                        <div class="updown">\n                            <i></i>\n                            <ul>\n                                <li><img src='+i[0].src+' alt=""></li>\n                            </ul>\n                            <i></i>\n                        </div>\n                    </div>\n                    <div class="product-buy">\n                        <h3>'+i[0].goodsname+"</h3>\n                        <div>"+i[0].desc+'</div>\n                        <div class="pricebox">\n                            <strong class="price">￥'+i[0].price+'</strong>\n                        </div>\n                        <div class="addressWrap">配送地址:&nbsp;<input type="text" placeholder="写了也没用"></div>\n                        <div class="product-page-cart">\n                            <div class="product-quantity input-group" data-minibuy="">\n                                <dl class="dl-horizontal">\n                                    <dt>数量</dt>\n                                </dl>\n                                <div class="spinner-buttons input-group-btn">\n                                    <button type="button" class="btn btn-default">-</button>\n                                </div>\n                                <input type="text" class="spinner-input" id="numBer" data-id="'+i[0].id+'" value="1">\n                                <div class="spinner-buttons input-group-btn">\n                                    <button type="button" class="btn btn-default">+</button>\n                                </div>\n                            </div>\n                            <div class="row">\n                                <a class="btn btn-danger favorite btn-buy distanceRight" href="">立即购买</a>\n                                <a class="btn btn-warning favorite distanceRight" href="javascript:viod(0)">加入购物车</a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>',$(".product-container").html(t)}),$(".product-container").on("click",".btn-default",function(){if(1==$(this).parent().index()){if($(this).parent().next().val()<=1)return void alert("商品数量不能小于1");$(this).parent().next().val($(this).parent().next().val()-1)}else{if(99<=$(this).parent().prev().val())return void alert("商品数量不能大于99");$(this).parent().prev().val(1*$(this).parent().prev().val()+1)}}),$(".product-container").on("click",".btn-warning",function(){if(!localStorage.getItem("userid"))return alert("请先登录账号"),!(location.href="./login.html");$.ajax({url:"../server/addcart.php",data:{goodsid:$("#numBer").data("id"),userid:localStorage.getItem("userid"),num:$("#numBer").val()}}).done(function(i){alert(i),getCartNum()})}),$(".product-container").on("mouseenter",".product-main-image",function(){$("#bigMirror").css({display:"block"}),$(this).mousemove(function(i){var t=i.pageX-$(this).offset().left-$("#bigMirror").width()/2,n=i.pageY-$(this).offset().top-$("#bigMirror").width()/2;t<=0?t=0:t+$("#bigMirror").width()>=$(this).width()&&(t=$(this).width()-$("#bigMirror").width()),n<=0?n=0:n+$("#bigMirror").height()>=$(this).height()&&(n=$(this).height()-$("#bigMirror").height()),$("#bigMirror").css({display:"block",left:t+"px",top:n+"px"}),$(".zoomImg").css({display:"block",backgroundPosition:2*-t+"px "+2*-n+"px"})})}),$(".product-container").on("mouseleave",".product-main-image",function(){$("#bigMirror").css("display","none"),$(".zoomImg").css("display","none")})});