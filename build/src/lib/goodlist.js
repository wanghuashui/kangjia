"use strict";$(function(){$.ajax({url:"../server/list.php",dataType:"json"}).done(function(s){console.log(JSON.stringify(s));for(var o="",t=0;t<s.length&&t<=23;t++)o+='<div class="goods-list-item" data-id="'+s[t].id+'">\n                <div class="figure">\n                    <img class="layz" alt="'+s[t].goodsname+'" src='+s[t].src+' style="display: inline;">\n                </div>\n                <h4 class="text-uppercase figure-title">'+s[t].goodsname+'</h4>\n                <div class="figure-title figureColor">'+s[t].desc+'</div>\n                <p class="price">￥'+s[t].price+'</p>\n                <div class="wrapper">\n                    <a href="javascipt:void(0)" type="button" class="btn btn-default">加入购物车</a>\n                    <a href="javascipt:void(0)" type="button" class="btn btn-danger">立即购买</a>\n                </div>\n            </div>';var i,e;$(".goods-list-all").html(o),(e=[],(i=s).forEach(function(o){0==e.filter(function(s){return s.goodstype==o.goodstype}).length&&e.push({goodstype:o.goodstype,goods:[]})}),i.forEach(function(o){e.forEach(function(s){s.goodstype==o.goodstype&&s.goods.push(o)})}),e).forEach(function(s,o){for(var t="",i=0;i<s.goods.length&&i<=23;i++)t+='<div class="goods-list-item" data-id="'+s.goods[i].id+'">\n                    <div class="figure">\n                            <img class="layz" alt="'+s.goods[i].goodsname+'" src='+s.goods[i].src+' style="display: inline;">\n                    </div>\n                    <h4 class="text-uppercase figure-title">'+s.goods[i].goodsname+'</h4>\n                    <div class="figure-title figureColor">'+s.goods[i].desc+'</div>\n                    <p class="price">￥'+s.goods[i].price+'</p>\n                    <div class="wrapper">\n                    <a href="javascipt:void(0)" type="button" class="btn btn-default">加入购物车</a>\n                    <a href="javascipt:void(0)" type="button" class="btn btn-danger">立即购买</a>\n                    </div>\n                </div>';$(".goods-list").eq(o+1).html(t)})}),$("dt").click(function(){$(".list-inline li,dt").css({background:"#fff",borderBottom:"1px solid #fff"}),$(this).css({background:"#eee",borderBottom:"1px solid #e0e0e0"}),$(".goods-list").css("display","none"),$(".goods-list").eq(0).css("display","block")}),$(".list-inline li").click(function(){$(".list-inline li,dt").css({background:"#fff",borderBottom:"1px solid #fff"}),$(this).css({background:"#eee",borderBottom:"1px solid #e0e0e0"});var s=$(this).index();$(".goods-list").css("display","none"),$(".goods-list").eq(s+1).css("display","block")}),$(".goods-list").on("click",".goods-list-item",function(){location.href="./item.html?id="+$(this).data("id")}),$(".goods-list").on("mouseenter",".goods-list-item",function(){$(this).find(".price").stop().fadeOut(),$(this).find(".wrapper").stop().fadeIn()}),$(".goods-list").on("mouseleave",".goods-list-item",function(){$(this).find(".wrapper").stop().fadeOut(),$(this).find(".price").stop().fadeIn()}),$(".goods-list").on("click",".btn-default",function(){if(!localStorage.getItem("userid"))return alert("请先登录账号"),!(location.href="./login.html");$.ajax({url:"../server/addcart.php",data:{goodsid:$(this).parents(".goods-list-item").data("id"),userid:localStorage.getItem("userid")}}).done(function(s){alert(s),getCartNum()})})});